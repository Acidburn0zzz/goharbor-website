{{ $thisSection  := .CurrentSection }}
{{ $thisPage     := .RelPermalink }}
{{ $docsSections := where site.Sections "Section" "docs" }}
{{ $version      := index (split .File.Path "/") 1 }}

<aside class="menu">
  <p class="menu-label">
    <a href="/docs/{{ $version }}">
      Harbor version {{ $version }}
    </a>
  </p>

  {{ range $docsSections }}
  {{ range .Sections }}
  {{ range .Sections }}
  {{ $isThisSection := eq $thisSection . }}

  <p class="menu-label">
    <a{{ if $isThisSection }} class="has-text-weight-bold"{{ end }} href="{{ .RelPermalink }}">
      {{ .Title }}
    </a>
  </p>

  {{ if $isThisSection }}
  <ul class="menu-list">
    {{ range .RegularPages }}
    {{ $isThisPage := eq $thisPage .RelPermalink }}

    <li>
      <a{{ if $isThisPage }} class="is-active"{{ end }} href="{{ .RelPermalink }}">
        {{ .Title }}
      </a>
    </li>
    {{ end }}
  </ul>
  {{ end }}

  {{ end }}
  {{ end }}
  {{ end }}
</aside>
